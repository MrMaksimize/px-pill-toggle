sudo: false
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
env:
  global:
    secure: RktkA2ME9y7na9jvpDNiJh0mGyJdqIGJP5M14yVLvqJaFxhD4fQNOO5jt1Y9lON0ZbkGcvQPDdqPC8QZJ0QhzERGDelMH8vm8r2UJEhVLypycbmv6ax8eKLARauLu5rMWRjqQYiF6pEiOoX6ZpObMn1l/N3r40iLSjtY1+OYaGm+6oFjh3NYDf2nkACdc+LTPNlhRyEXpRe9PbmEKeRLRTx1XMC9vUWLcSFSBfYrKcSLyxfux1Me0tVmI/erdJX8fVocPquGEvpt9/BuL5PSlugIPfFGO7U6WI7Nj7H3X6j76wAQPYdYdqELDZHXSHP/SE4wGv6HZkwnRhTpLnURFcHqolbOKocUajJjvwZLfqFhmVWH6Mgh/1MEDHklBdfOIr0ZneSf3daPHNAbPtVkdaNnu5RjxbBqtgkKyp/fG8ZRQ5Tkux0SPDdOQKcNWpt5I5yGfQSaiXto3cr6x7EHzrAvlDLewGoI3+8GrD/f/bbpMU+oR5Y52Rqoa9UQJEWlVFhW2QP5Sr3QbyBEB1iRuUbZoIpgE20NaPcjcZXiqivwABRzi3a0Dtx4yGvrRGfM8et2er/An/I2iM2Hengxjnt3qOI9zj//J99D3dqh6+tErfiBlTDqomAfHYq/Lv0Rwn/3STGv7A7KteXiAGuXqGaT1wKaDhf92cC0zacWMm4=
before_install:
  - if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$password" -in id_rsa.enc -out deploy_key -d; fi
after_success:
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
